<div id="site-header" class="site-header bg-black">
    <div class="container">
        <a class="logo" href="home.html" title="">
            <img class="hidden-xs" src="content/images/assets/bla-logo_registered_trademark_header.png" alt="" />
            <img class="visible-xs" src="content/images/assets/mobile/Mobile_bla-logo_registered_trademark_header.png" alt="" />
        </a>
        <button class="navbar-toggle collapsed" data-target="#bs-navbar-collapse" data-toggle="collapse" type="button">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </button>
        <span class="welcome-user visible-xs">hi, kourosh!</span>
        <section class="area-section">
            <select id="select-area" class="selectpicker select-area select-scroll">
                <option value="">LA</option>
                <option data-subtext="(CA)" value="">OC</option>
                <option value="">SD</option>
                <option data-subtext="(NJ)" value="">OC</option>
                <option value="">LA</option>
                <option data-subtext="(CA)" value="">OC</option>
                <option value="">SD</option>
                <option data-subtext="(NJ)" value="">OC</option>
                <option value="">LA</option>
                <option data-subtext="(CA)" value="">OC</option>
                <option value="">SD</option>
                <option data-subtext="(NJ)" value="">OC</option>
                <option value="">LA</option>
                <option data-subtext="(CA)" value="">OC</option>
                <option value="">SD</option>
                <option data-subtext="(NJ)" value="">OC</option>
                <option value="">LA</option>
                <option data-subtext="(CA)" value="">OC</option>
                <option value="">SD</option>
                <option data-subtext="(NJ)" value="">OC</option>
                <option value="">LA</option>
                <option data-subtext="(CA)" value="">OC</option>
                <option value="">SD</option>
                <option data-subtext="(NJ)" value="">OC</option>
                <option value="">LA</option>
                <option data-subtext="(CA)" value="">OC</option>
                <option value="">SD</option>
                <option data-subtext="(NJ)" value="">OC</option>
            </select>
        </section>
        <section class="region-section">
            <select id="select-region" class="selectpicker select-region select-scroll">
                <option value="">Entire region</option>
                <option>Australia</option>
                <option>Austria</option>
                <option>Belgium</option>
                <option>Brazil</option>
                <option>Canada</option>
                <option>Denmark</option>
                <option>Finland</option>
                <option>France</option>
                <option>Germany</option>
                <option>Greece</option>
                <option>Ireland</option>
                <option>Israel</option>
                <option>Italy</option>
                <option>Japan</option>
                <option>Luxembourg</option>
                <option>Mexico</option>
                <option>Netherlands</option>
                <option>Norway</option>
                <option>Poland</option>
                <option>Portugal</option>
                <option>Russia</option>
                <option>Spain</option>
                <option>Sweden</option>
                <option>Switzerland</option>
                <option>Turkey</option>
                <option>United Kingdom</option>
                <option>United States</option>
            </select>
        </section>
        <script type="text/javascript">
            var selectScroll,
                selectAreaScroll,
                selectRegionScroll,
                hasContentArea,
                hasContentRegion;
            $(document).ready(function(){
                $('#select-area').selectpicker();
                $('#select-region').selectpicker({
                    liveSearch: true
                });
                selectArea();

                hasContentArea = $('.area-section').find('.dropdown-menu.open').length;
                if(hasContentArea == 1){
                    $('.area-section .dropdown-menu.open').attr("id", "selectArea");
                    selectAreaScroll = new IScroll('#selectArea', {
                        scrollbars: true,
                        mouseWheel: true,
                        interactiveScrollbars: true,
                        shrinkScrollbars: 'scale',
                        fadeScrollbars: true,
                        click: true
                    });
                }

                hasContentRegion = $('.region-section').find('.dropdown-menu.open').length;
                if(hasContentRegion == 1){
                    $('<div id="selectRegion" class="section-scroll"></div>').insertAfter(".region-section .bs-searchbox");
                    $('.region-section .dropdown-menu.inner').appendTo('.region-section .section-scroll');
                    selectRegionScroll = new IScroll('#selectRegion', {
                        scrollbars: true,
                        mouseWheel: true,
                        interactiveScrollbars: true,
                        shrinkScrollbars: 'scale',
                        fadeScrollbars: true,
                        click: true
                    });
                }

                // custom css expression for a case-insensitive contains()
                jQuery.expr[':'].Contains = function(a,i,m){
                    return (a.textContent || a.innerText || "").toUpperCase().indexOf(m[3].toUpperCase())>=0;
                };
                listFilter($(".select-region .bs-searchbox"), $(".select-region ul.dropdown-menu"));

                // hide nav menu when click on select
                $('.region-section, .area-section').click(function(e){
                    if($(window).width()<768){
                        if(temp = 1){
                            $('#bs-navbar-collapse').removeClass("in").css({'height': 1});
                            $( "#site-header" ).css({"height": ""});
                            temp = 0;
                        }
                    }
                });

                $('.region-section').click(function(e){
                    $('#select-region').selectpicker('refresh');
                });
            });

            $(window).resize(function(){
                selectArea();

                if(hasContentRegion == 1){
                    selectRegionScroll.refresh();
                }

                if(hasContentArea == 1){
                    selectAreaScroll.refresh();
                }

            });

            function selectArea(){
                var areaLeft = $('.area-section').offset().left;
                if($(window).width() < 768){
                    $('.area-section div.dropdown-menu').css({'margin-left': - areaLeft});
                    $('.area-section ul.dropdown-menu').css({'width': $(window).width()});
                }else{
                    $('.area-section div.dropdown-menu').css({'margin-left': ''});
                    $('.area-section ul.dropdown-menu').css({'width': ''});
                }
            }

            function listFilter(header, list) {
                var $object = $('input.input-block-level');
                var filter = $object.val();
                $object.change( function (e) {
                    e.preventDefault();
                    filter = $(this).val();
                    if(filter != null) {
                        //highlighted letters in the list when it match key
                        var match = RegExp(this.value, 'gi');
                        $(list).find(".text").html(function(){
                            if (!filter) return $(this).text();
                            return $(this).text().replace(match, '<u>$&</u>');
                        });
                    }
                    return false;
                }).keyup( function () {
                    // fire the above change event after every letter
                    $(this).change();

                    setTimeout(function(){
                        if(hasContentRegion == 1){
                            selectRegionScroll.refresh();
                        }
                    }, 100);
                });
            }
        </script>
        <div class="clear visible-xs visible-sm"></div>

        <!-- .navbar-collapse -->
         <div class="collapse navbar-collapse menuList" id="bs-navbar-collapse">
            <ul class="nav navbar-nav navbar-right nav-main">
                <li class="li-blog"><a href="lifestyle-blog.html" title="">Blog</a></li>
                <li class="li-chat"><a href="#" title="">Chat</a></li>
                <!--<li class="li-register"><a href="javascript:void(0);" title="" data-target="#modal-sign-up" data-toggle="modal">SIGN UP</a> / <a href="javascript:void(0);" title="" data-target="#modal-login" data-toggle="modal">LOGIN</a></li>-->
                <li class="li-create"><a href="javascript:void(0);" title="" data-target="#modal-sign-up" data-toggle="modal">CREATE YOUR EVENT</a></li>
                <li class="li-account hidden-xs dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="#">Hi, Kourosh</a>
                    <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                        <li><a href="#" title="sign out" class="link-sign-out">sign out</a></li>
                    </ul>
                </li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div>
